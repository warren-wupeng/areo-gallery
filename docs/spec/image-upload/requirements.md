# 图片上传管理需求文档

## 介绍

图片上传管理模块负责处理用户上传航空摄影图片的完整流程，包括图片格式验证、信息填写、审核队列管理等。该模块需要确保上传的图片符合无损要求，并收集完整的拍摄信息用于展示和管理。

## 需求

### 需求 1：图片上传入口与格式验证

**用户故事：** 作为登录用户，我希望能够上传我的航空摄影作品，以便与其他用户分享高质量的航空摄影图片。

#### 验收标准
1. WHEN 用户点击侧边栏"上传图片" THEN 系统 SHALL 跳转到上传页面
2. WHEN 用户未登录点击上传 THEN 系统 SHALL 重定向到登录页面
3. WHEN 进入上传页面 THEN 系统 SHALL 显示蓝色"+"号上传按钮
4. WHEN 用户悬停上传按钮 THEN 系统 SHALL 显示"点击选择相册图片"提示
5. WHEN 用户点击上传按钮 THEN 系统 SHALL 唤起本地文件选择器
6. WHEN 用户选择文件时 THEN 系统 SHALL 仅允许选择无损格式（RAW、TIFF、未压缩JPG）
7. WHEN 用户选择压缩格式图片 THEN 系统 SHALL 拒绝上传并提示"请选择无损格式图片"
8. WHEN 文件选择成功 THEN 系统 SHALL 显示文件预览和基本信息

### 需求 2：图片信息填写

**用户故事：** 作为用户，我希望能够为上传的图片填写详细的拍摄信息，以便其他用户了解图片的拍摄背景和技术参数。

#### 验收标准
1. WHEN 图片选择完成后 THEN 系统 SHALL 跳转到信息填写页面
2. WHEN 进入信息填写页面 THEN 系统 SHALL 显示图片预览和表单
3. WHEN 用户填写必填信息 THEN 系统 SHALL 要求填写：图片名称、飞机注册号、航空公司、拍摄机场、相机型号、飞机型号
4. WHEN 用户填写可选信息 THEN 系统 SHALL 提供HOT选项和给审核员的留言
5. WHEN 用户勾选HOT选项 THEN 系统 SHALL 显示"推荐理由"输入框
6. WHEN 用户填写推荐理由 THEN 系统 SHALL 要求说明为何认为该图可成为热点
7. WHEN 用户填写审核员留言 THEN 系统 SHALL 说明该内容仅审核员可见
8. WHEN 用户提交表单时 THEN 系统 SHALL 验证所有必填字段是否完整
9. IF 必填字段缺失 THEN 系统 SHALL 高亮显示缺失字段并阻止提交

### 需求 3：上传处理与队列管理

**用户故事：** 作为用户，我希望上传的图片能够进入审核队列，并能够查看上传状态，以便了解图片的处理进度。

#### 验收标准
1. WHEN 用户提交图片信息 THEN 系统 SHALL 开始上传图片文件
2. WHEN 图片上传时 THEN 系统 SHALL 显示上传进度条和文件大小
3. WHEN 上传完成 THEN 系统 SHALL 将图片加入待审核队列
4. WHEN 图片进入审核队列 THEN 系统 SHALL 显示"已提交，等待审核"状态
5. WHEN 用户查看个人主页 THEN 系统 SHALL 显示待审核图片数量
6. WHEN 图片审核状态变更 THEN 系统 SHALL 实时更新用户个人主页的统计信息
7. IF 上传过程中网络中断 THEN 系统 SHALL 提供断点续传功能
8. IF 上传失败 THEN 系统 SHALL 显示错误信息并提供重新上传选项

### 需求 4：图片质量与格式管理

**用户故事：** 作为系统，我需要确保上传的图片符合质量要求，以便维护图库的高标准。

#### 验收标准
1. WHEN 用户上传图片时 THEN 系统 SHALL 验证文件格式是否为支持的无损格式
2. WHEN 系统检测图片时 THEN 系统 SHALL 验证图片是否包含有效的EXIF信息
3. WHEN 图片上传时 THEN 系统 SHALL 检查文件大小是否在合理范围内（最大50MB）
4. WHEN 图片处理时 THEN 系统 SHALL 生成多种尺寸的缩略图用于不同场景展示
5. WHEN 图片存储时 THEN 系统 SHALL 保持原始文件完整性，不进行任何压缩
6. WHEN 图片上传时 THEN 系统 SHALL 自动提取EXIF中的拍摄参数信息
7. IF 图片格式不支持 THEN 系统 SHALL 拒绝上传并提示支持的格式列表
8. IF 图片损坏或无法读取 THEN 系统 SHALL 拒绝上传并提示文件可能损坏

### 需求 5：上传历史与状态跟踪

**用户故事：** 作为用户，我希望能够查看我的上传历史和处理状态，以便了解我的作品审核情况。

#### 验收标准
1. WHEN 用户查看个人主页 THEN 系统 SHALL 显示上传历史列表
2. WHEN 显示上传历史时 THEN 系统 SHALL 按时间倒序排列
3. WHEN 显示每张图片时 THEN 系统 SHALL 显示缩略图、上传时间、审核状态
4. WHEN 图片审核通过 THEN 系统 SHALL 显示"已通过"状态和通过时间
5. WHEN 图片审核被拒 THEN 系统 SHALL 显示"被拒绝"状态和拒绝原因
6. WHEN 图片待审核 THEN 系统 SHALL 显示"审核中"状态和提交时间
7. WHEN 用户点击被拒图片 THEN 系统 SHALL 显示详细的拒绝原因和改进建议
8. WHEN 用户查看上传统计 THEN 系统 SHALL 显示总上传数、通过数、拒绝数等数据
